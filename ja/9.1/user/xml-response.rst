=================
XMLによる検索結果
=================

XML応答による検索
=================

Fessの検索結果をXMLにより出力することができます。XMLで出力するためには管理画面のクロール全般の設定でXML応答を有効にしておく必要があります。

リクエスト
----------

XMLにより出力結果を得るためには
``http://localhost:8080/fess/xml?query=検索語``
のようなリクエストを送ります。リクエストパラメータについては以下の通りです。

+----------------+-----------------------------------------------------------+
| query          | 検索語。URLエンコードして渡します。                       |
+----------------+-----------------------------------------------------------+
| start          | 開始する件数位置。0から始まります。                       |
+----------------+-----------------------------------------------------------+
| num            | 表示件数。デフォルトは20件です。100件まで表示できます。   |
+----------------+-----------------------------------------------------------+
| fields.label   | ラベル値。ラベルを指定する場合に利用します。              |
+----------------+-----------------------------------------------------------+

Table: リクエストパラメータ


レスポンス
----------

以下のようなレスポンスが返ります。

::

    <?xml version="1.0" encoding="UTF-8"?>
    <response>
      <version>1</version>
      <status>0</status>
      <query>Fess</query>
      <exec-time>0.64</exec-time>
      <page-size>20</page-size>
      <page-number>1</page-number>
      <record-count>101</record-count>
      <page-count>6</page-count>
      <result>
        <doc>
          <created>2014-05-24T15:13:27.692+0900</created>
          <doc-id>d55275b552da44999cafe118aa8fed62</doc-id>
          <title>Fess&#12398;&#12452;&#12531;...</title>
          <url>http://fess.codelibs.org/ja/setup.html</url>
          <score>0.83177954</score>
          <site>fess.codelibs.org/ja/setup.html</site>
          <filetype-s>html</filetype-s>
          <content-description> &lt;em&gt;fess&lt;/em&gt;...</content-description>
          <digest>&#12458;&#12540;&#12503;&#12531;&#12477;...</digest>
          <host>fess.codelibs.org</host>
          <mimetype>text/html</mimetype>
          <content-length>49702</content-length>
          <boost>1.0</boost>
          <last-modified>2014-05-22T11:09:07.000+0900</last-modified>
          <id>http://fess.codelibs.org/ja/setup.html</id>
          <url-link>http://fess.codelibs.org/ja/setup.html</url-link>
        </doc>
    ...
      </result>
    </response>

各要素については以下の通りです。

+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| response              | ルート要素。                                                                                                                              |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| version               | フォーマットバージョン。                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| status                | レスポンスのステータス。status値は、0:正常、1:検索エラー、2または3:リクエストパラメータエラー、9:サービス停止中、-1:API種別エラーです。   |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| query                 | 検索語。                                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| exec-time             | 応答時間。単位は秒。                                                                                                                      |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| page-size             | 表示件数。                                                                                                                                |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| page-number           | ページ番号。                                                                                                                              |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| record-count          | 検索語に対してヒットした件数。                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| page-count            | 検索語に対してヒットした件数のページ数。                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| result                | 検索結果の親要素。                                                                                                                        |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| doc                   | 検索結果の要素。                                                                                                                          |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| site                  | サイト名。                                                                                                                                |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| content-description   | コンテンツの説明。                                                                                                                        |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| host                  | ホスト名。                                                                                                                                |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| last-modified         | 最終更新日時。                                                                                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| cache                 | コンテンツの内容。                                                                                                                        |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| score                 | ドキュメントのスコア値。                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| digest                | ドキュメントのダイジェスト文字列。                                                                                                        |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| created               | ドキュメントの生成日時。                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| url                   | ドキュメントのURL。                                                                                                                       |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| id                    | ドキュメントのID。                                                                                                                        |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| mimetype              | MIMEタイプ。                                                                                                                              |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| title                 | ドキュメントのタイトル。                                                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| content-title         | 表示用のドキュメントのタイトル。                                                                                                          |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| content-length        | ドキュメントのサイズ。                                                                                                                    |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+
| url-link              | 検索結果としてのURL。                                                                                                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------+

Table: レスポンス情報


